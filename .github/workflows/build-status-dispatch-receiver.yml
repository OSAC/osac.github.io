name: Build PR
on:
  repository_dispatch:
    types: [osac-pr-preview-build]

jobs:
  linux:
    runs-on: ubuntu-latest
    steps:
- name: comment Preview Ready
  uses: marocchino/sticky-pull-request-comment@v2
  with:
    message: |
      ### ✅ Deploy Preview for win11react ready!

      | Name | Link |
      |-|-|
      | 🔨 Latest commit | ${{ github.event.pull_request.head.sha }} |
      | 🔍 Latest deploy log | ${{ github.server_url }}/${{ github.repository }}/actions/runs/${{ github.run_id }} |
      | 😎 Deploy Preview | https://pr-preview.win11react.com/${{ github.event.pull_request.number }} |

    GITHUB_TOKEN: ${{ secrets.BOT }}

- if: ${{ failure() }}
  uses: marocchino/sticky-pull-request-comment@v2
  with:
    message: |
      ### ❌ Deploy Preview for win11react failed.

      | Name | Link |
      |-|-|
      | 🔨 Latest commit | ${{ github.event.pull_request.head.sha }} |
      | 🔍 Latest deploy log | ${{ github.server_url }}/${{ github.repository }}/actions/runs/${{ github.run_id }} |

    GITHUB_TOKEN: ${{ secrets.BOT }}
